{"version":3,"file":"index.module.js","sources":["../../node_modules/@compactjs/uea/dist/index.module.js","../../src/index.js"],"sourcesContent":["var r=function(r){return\"string\"==typeof r?Array.from(document.querySelectorAll(r)):Array.isArray(r)?r:\"length\"in r?Array.from(r).reduce(e,[]):[r]},e=function(r,e){return e.nodeType===Node.ELEMENT_NODE&&r.push(e),r};export{r as accept};\n//# sourceMappingURL=index.module.js.map\n","import { accept } from '@compactjs/uea';\nimport './index.scss';\n\nconst createMenu = (parentElement, { className } = {}) => {\n  const menu = document.createElement('ul');\n  menu.className = className;\n  parentElement.appendChild(menu);\n  return {\n    show(items, { x, y }) {\n      menu.innerHTML = '';\n      menu.style.top = `${y}px`;\n      menu.style.left = `${x}px`;\n      items.forEach(({ text = '', className = '', onClick = null }) => {\n        const mItem = document.createElement('li');\n        mItem.innerHTML = text;\n        mItem.className = className;\n        if (onClick) {\n          // mItem.tabIndex = 0;\n          mItem.classList.add('menu-item-clickable');\n          mItem.addEventListener('click', onClick);\n          mItem.addEventListener('click', () => this.hide());\n        }\n        menu.appendChild(mItem);\n      });\n      menu.classList.add('menu-visible');\n      // menu.firstChild.focus();\n    },\n    hide() {\n      menu.classList.remove('menu-visible');\n    },\n  };\n};\n\nexport const contextmenu = (\n  element,\n  items,\n  {\n    parentElement = document.body,\n    root = document,\n    className = 'context-menu',\n  } = {}\n) => {\n  const elements = accept(element);\n  const menu = createMenu(parentElement, { className });\n  elements.forEach((e) => {\n    e.addEventListener('contextmenu', (e) => {\n      const _items = typeof items === 'function' ? items(e.target) : items;\n      if (!_items) return;\n      menu.show(_items, { x: e.clientX, y: e.clientY });\n      e.preventDefault();\n    });\n  });\n  root.addEventListener('click', (e) => {\n    // make sure, the clicked element wasn't a menu item\n    if (\n      !e.target.parentElement ||\n      !e.target.parentElement.classList.contains(className)\n    )\n      menu.hide();\n  });\n};\n"],"names":["e","r","nodeType","Node","ELEMENT_NODE","push","contextmenu","element","items","parentElement","document","body","root","className","elements","Array","from","querySelectorAll","isArray","reduce","menu","createElement","appendChild","show","x","y","innerHTML","style","top","left","forEach","text","onClick","mItem","classList","add","addEventListener","_this","hide","remove","createMenu","_items","target","clientX","clientY","preventDefault","contains"],"mappings":"AAAA,IAAoJA,EAAE,SAASC,EAAED,GAAG,OAAOA,EAAEE,WAAWC,KAAKC,cAAcH,EAAEI,KAAKL,GAAGC,GCiCxMK,EAAc,SACzBC,EACAC,SDnCaP,eCwCT,SAHFQ,cAAAA,aAAgBC,SAASC,WACzBC,KAAAA,aAAOF,eACPG,UAAAA,aAAY,iBAGRC,ED1CgB,iBAATb,EC0CWM,GD1CiBQ,MAAMC,KAAKN,SAASO,iBAAiBhB,IAAIc,MAAMG,QAAQjB,GAAGA,EAAE,WAAWA,EAAEc,MAAMC,KAAKf,GAAGkB,OAAOnB,EAAE,IAAI,CAACC,GC2CxImB,EAxCW,SAACX,SAAiBI,cAAc,MAAdA,UAC7BO,EAAOV,SAASW,cAAc,MAGpC,OAFAD,EAAKP,UAAYA,EACjBJ,EAAca,YAAYF,GACnB,CACLG,cAAKf,gBAASgB,IAAAA,EAAGC,IAAAA,EACfL,EAAKM,UAAY,GACjBN,EAAKO,MAAMC,IAASH,OACpBL,EAAKO,MAAME,KAAUL,OACrBhB,EAAMsB,QAAQ,oBAAGC,KAAAA,aAAO,SAAIlB,UAAAA,aAAY,SAAImB,QAAAA,aAAU,OAC9CC,EAAQvB,SAASW,cAAc,MACrCY,EAAMP,UAAYK,EAClBE,EAAMpB,UAAYA,EACdmB,IAEFC,EAAMC,UAAUC,IAAI,uBACpBF,EAAMG,iBAAiB,QAASJ,GAChCC,EAAMG,iBAAiB,QAAS,kBAAMC,EAAKC,UAE7ClB,EAAKE,YAAYW,KAEnBb,EAAKc,UAAUC,IAAI,iBAGrBG,gBACElB,EAAKc,UAAUK,OAAO,kBAebC,CAAW/B,EAAe,CAAEI,UAAAA,IACzCC,EAASgB,QAAQ,SAAC9B,GAChBA,EAAEoC,iBAAiB,cAAe,SAACpC,GACjC,IAAMyC,EAA0B,mBAAVjC,EAAuBA,EAAMR,EAAE0C,QAAUlC,EAC1DiC,IACLrB,EAAKG,KAAKkB,EAAQ,CAAEjB,EAAGxB,EAAE2C,QAASlB,EAAGzB,EAAE4C,UACvC5C,EAAE6C,sBAGNjC,EAAKwB,iBAAiB,QAAS,SAACpC,GAG3BA,EAAE0C,OAAOjC,eACTT,EAAE0C,OAAOjC,cAAcyB,UAAUY,SAASjC,IAE3CO,EAAKkB"}