{"version":3,"file":"index.module.js","sources":["../../node_modules/@compactjs/uea/dist/index.module.js","../../src/index.js"],"sourcesContent":["var r=function(r){return\"string\"==typeof r?Array.from(document.querySelectorAll(r)):Array.isArray(r)?r:void 0!==r.length?Array.from(r):[r]};export{r as accept};\n//# sourceMappingURL=index.module.js.map\n","import { accept } from '@compactjs/uea';\nimport './index.scss';\n\nconst createMenu = (parentElement, { className } = {}) => {\n  const menu = document.createElement('ul');\n  menu.className = className;\n  parentElement.appendChild(menu);\n  return {\n    show(items, { x, y }) {\n      menu.innerHTML = '';\n      menu.style.top = `${y}px`;\n      menu.style.left = `${x}px`;\n      items.forEach(({ text = '', className = '', onClick = null }) => {\n        const mItem = document.createElement('li');\n        mItem.innerHTML = text;\n        mItem.className = className;\n        if (onClick) {\n          // mItem.tabIndex = 0;\n          mItem.classList.add('menu-item-clickable');\n          mItem.addEventListener('click', onClick);\n          mItem.addEventListener('click', () => this.hide());\n        }\n        menu.appendChild(mItem);\n      });\n      menu.classList.add('menu-visible');\n      // menu.firstChild.focus();\n    },\n    hide() {\n      menu.classList.remove('menu-visible');\n    },\n  };\n};\n\nexport const contextmenu = (\n  element,\n  items,\n  {\n    parentElement = document.body,\n    root = document,\n    className = 'context-menu',\n  } = {}\n) => {\n  const elements = accept(element);\n  const menu = createMenu(parentElement, { className });\n  elements.forEach((e) => {\n    e.addEventListener('contextmenu', (e) => {\n      const _items = typeof items === 'function' ? items(e.target) : items;\n      if (!_items) return;\n      menu.show(_items, { x: e.clientX, y: e.clientY });\n      e.preventDefault();\n    });\n  });\n  root.addEventListener('click', (e) => {\n    // make sure, the clicked element wasn't a menu item\n    if (\n      !e.target.parentElement ||\n      !e.target.parentElement.classList.contains(className)\n    )\n      menu.hide();\n  });\n};\n"],"names":["contextmenu","element","items","r","parentElement","document","body","root","className","elements","Array","from","querySelectorAll","isArray","length","menu","createElement","appendChild","show","x","y","innerHTML","style","top","left","forEach","text","onClick","mItem","classList","add","addEventListener","_this","hide","remove","createMenu","e","_items","target","clientX","clientY","preventDefault","contains"],"mappings":"AAAA,ICiCaA,EAAc,SACzBC,EACAC,SDnCaC,eCwCT,SAHFC,cAAAA,aAAgBC,SAASC,WACzBC,KAAAA,aAAOF,eACPG,UAAAA,aAAY,iBAGRC,ED1CgB,iBAATN,EC0CWF,GD1CiBS,MAAMC,KAAKN,SAASO,iBAAiBT,IAAIO,MAAMG,QAAQV,GAAGA,OAAE,IAASA,EAAEW,OAAOJ,MAAMC,KAAKR,GAAG,CAACA,GC2ChIY,EAxCW,SAACX,SAAiBI,cAAc,MAAdA,UAC7BO,EAAOV,SAASW,cAAc,MAGpC,OAFAD,EAAKP,UAAYA,EACjBJ,EAAca,YAAYF,GACnB,CACLG,cAAKhB,gBAASiB,IAAAA,EAAGC,IAAAA,EACfL,EAAKM,UAAY,GACjBN,EAAKO,MAAMC,IAASH,OACpBL,EAAKO,MAAME,KAAUL,OACrBjB,EAAMuB,QAAQ,oBAAGC,KAAAA,aAAO,SAAIlB,UAAAA,aAAY,SAAImB,QAAAA,aAAU,OAC9CC,EAAQvB,SAASW,cAAc,MACrCY,EAAMP,UAAYK,EAClBE,EAAMpB,UAAYA,EACdmB,IAEFC,EAAMC,UAAUC,IAAI,uBACpBF,EAAMG,iBAAiB,QAASJ,GAChCC,EAAMG,iBAAiB,QAAS,kBAAMC,EAAKC,UAE7ClB,EAAKE,YAAYW,KAEnBb,EAAKc,UAAUC,IAAI,iBAGrBG,gBACElB,EAAKc,UAAUK,OAAO,kBAebC,CAAW/B,EAAe,CAAEI,UAAAA,IACzCC,EAASgB,QAAQ,SAACW,GAChBA,EAAEL,iBAAiB,cAAe,SAACK,GACjC,IAAMC,EAA0B,mBAAVnC,EAAuBA,EAAMkC,EAAEE,QAAUpC,EAC1DmC,IACLtB,EAAKG,KAAKmB,EAAQ,CAAElB,EAAGiB,EAAEG,QAASnB,EAAGgB,EAAEI,UACvCJ,EAAEK,sBAGNlC,EAAKwB,iBAAiB,QAAS,SAACK,GAG3BA,EAAEE,OAAOlC,eACTgC,EAAEE,OAAOlC,cAAcyB,UAAUa,SAASlC,IAE3CO,EAAKkB"}